#类的初始化

when：何时对类进行初始化

- 使用new关键字实例化对象时。
- 访问类的静态字段时，但是被final修饰的静态字段除外。
- 调用一个类的静态方法时。
- 通过反射对类进行调用时。
- 进行一个类的初始化时要先初始化其父类。
- JVM启动时会首先初始化主类。
-当使用JDK1.7的动态语言支持时，java.lang.invoke.MethodHandle实例最后的解析结果REF_getStatic、REF_putStatic、REF_invokeStatic的方法句柄所对应的类还未初始化时。

这几种方式称为对类的主动引用，而其他的任何方式引用类都不会触发类的初始化，称为被动引用。

how：初始化的过程
执行类构造器<clinit>()方法，该方法由编译器自动收集类中的所有类变量的赋值动作和静态语句块中的语句合并产生的，该方法不同于类的构造函数（实例构造器），构造函数是用于创建对象的，而类构造器是用来创建类的。在多线程环境下虚拟机会保证该方法被正确的同步，并且在同一个类加载器下，一个类只会被初始化一次。我觉得可以这样理解，类的初始化表示创建一个构造对象的模版，而对象的初始化则表示调用构造方法构造一个对象。